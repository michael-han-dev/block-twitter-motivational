"use strict";(()=>{var p=(e,t)=>()=>(e&&(t=e(e=0)),t);var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);async function a(e,t){try{return(await chrome.storage.sync.get({[e]:t}))[e]}catch(o){return console.error(`Failed to get storage value for key ${e}:`,o),t}}async function d(e,t){try{await chrome.storage.sync.set({[e]:t})}catch(o){console.error(`Failed to set storage value for key ${e}:`,o)}}async function g(e,t){try{return(await chrome.storage.local.get({[e]:t}))[e]}catch(o){return console.error(`Failed to get local storage value for key ${e}:`,o),t}}async function E(e,t){try{await chrome.storage.local.set({[e]:t})}catch(o){if(o instanceof Error&&o.message.includes("Extension context invalidated")){console.warn(`Extension context invalidated - skipping storage save for ${e}`);return}console.error(`Failed to set local storage value for key ${e}:`,o)}}var s,r,y=p(()=>{"use strict";s={SLOP_BLOCK_ENABLED:"slopBlockEnabled",DETECTION_COUNT:"detectionCount",BLUR_MODE:"blurMode",GROQ_API_KEY:"groqApiKey",SYSTEM_PROMPT:"systemPrompt",PROCESSED_TWEET_IDS:"processedTweetIds",COLLAPSED_TWEET_IDS:"collapsedTweetIds",BLOCKED_KEYWORDS:"blockedKeywords"},r={[s.SLOP_BLOCK_ENABLED]:!1,[s.DETECTION_COUNT]:0,[s.BLUR_MODE]:!0,[s.GROQ_API_KEY]:"",[s.SYSTEM_PROMPT]:`BE EXTREMELY CONCISE WITH YOUR THOUGHTS, NO NEED TO ELABORATE. You are an expert at detecting AI-generated tweets slop, engagement bait, and generic inspirational content on social media. Analyze each tweet and classify it as slop or genuine content. SLOP INDICATORS: motivational clich\xE9s such as \u201Cmindset is everything,\u201D \u201Cfollow your dreams,\u201D or \u201Chustle harder\u201D; finishes with a call to action or promise of a link/course/email thread; generic advice patterns like \u201Chere\u2019s what I learned,\u201D \u201CX things nobody tells you,\u201D or \u201Cstop doing this, start doing this\u201D; engagement bait phrases such as \u201Cunpopular opinion,\u201D \u201Clet that sink in,\u201D or \u201Cthread \u{1F9F5}\u201D; AI-like structures including numbered or bulleted list of advice, claims, or one-sentence paragraphs, formulaic advice, or excessive emojis; buzzwords like entrepreneur, transformation, breakthrough, optimize, or unlock potential; direct sales pitches such as \u201CDM me,\u201D \u201Clink in bio,\u201D \u201Climited time,\u201D or \u201Cexclusive access.\u201D Additional red flags: any presence of the Unicode em dash (U+2014) instantly marks the tweet as slop with confidence 1.0; dramatic one-line paragraphs split for emphasis; repetitive rhetorical questions; imperative mini-sentences (\u201CGo gym.\u201D, \u201CKeep shipping.\u201D). If two or more indicators appear, classify as slop with high confidence; otherwise judge contextually. 

Important! You must return JSON format: {"results": [{"id": 0, "isSlop": true/false, "confidence": 0.0-1.0}]} where id matches tweet position (0-10).`,[s.PROCESSED_TWEET_IDS]:[],[s.COLLAPSED_TWEET_IDS]:[],[s.BLOCKED_KEYWORDS]:[]}});var _=T(()=>{y();var n,l="";function w(){return{statusText:document.getElementById("statusText"),toggleButton:document.getElementById("toggleSwitch"),settingsButton:document.getElementById("settingsButton"),mainView:document.getElementById("mainView"),settingsView:document.getElementById("settingsView"),backButton:document.getElementById("backButton"),apiKeyInput:document.getElementById("apiKeyInput"),saveApiKeyButton:document.getElementById("submitApiKey"),llmCountBadge:document.getElementById("llmCountBadge"),keywordsList:document.getElementById("keywordsList"),addKeywordButton:document.getElementById("addKeyword"),saveKeywordsButton:document.getElementById("saveKeywords")}}function u(e){if(!e)return"";let t=e.slice(0,6),o="*".repeat(Math.max(0,e.length-t.length));return t+o}async function L(e){let t=n.toggleButton;if(t.checked=e,n.statusText.textContent=e?"Enabled":"Disabled",e){let o=await a(s.DETECTION_COUNT,r[s.DETECTION_COUNT]);m(o)}else n.llmCountBadge.style.display="none";try{await d(s.SLOP_BLOCK_ENABLED,e),chrome.runtime.sendMessage({action:"stateChanged",enabled:e}).catch(()=>{}),chrome.tabs.query({active:!0,currentWindow:!0},o=>{var i;(i=o[0])!=null&&i.id&&chrome.tabs.sendMessage(o[0].id,{action:"stateChanged",enabled:e}).catch(()=>{})})}catch(o){console.error("Error updating toggle state:",o)}}function v(){n.mainView.style.display="flex",n.settingsView.style.display="none",n.mainView.style.removeProperty("width")}function B(){n.mainView.style.display="none",n.settingsView.style.display="block",n.settingsView.style.removeProperty("width")}async function h(){let e=n.apiKeyInput.value.trim();e&&(await E(s.GROQ_API_KEY,e),l=e,n.apiKeyInput.value=u(e),n.saveApiKeyButton.textContent="Saved!",setTimeout(()=>{n.saveApiKeyButton.textContent="Submit API Key"},2e3))}async function I(){let e=await g(s.GROQ_API_KEY,"");l=e,n.apiKeyInput.value=u(e);let t=await a(s.DETECTION_COUNT,r[s.DETECTION_COUNT]);m(t)}function m(e){let t=n.toggleButton.checked;e>0?(n.llmCountBadge.textContent=String(e),n.llmCountBadge.style.display="inline-block"):t?(n.llmCountBadge.textContent="ON",n.llmCountBadge.style.display="inline-block"):n.llmCountBadge.style.display="none"}function O(){let e=n.apiKeyInput.value.trim(),t=e===u(l)||e===l;n.saveApiKeyButton.toggleAttribute("disabled",t)}async function f(){n=w();let e=await a(s.SLOP_BLOCK_ENABLED,r[s.SLOP_BLOCK_ENABLED]);await I();let t=n.toggleButton;t.checked=e,n.statusText.textContent=e?"Enabled":"Disabled",n.toggleButton.addEventListener("change",async()=>{let i=n.toggleButton.checked;await L(i)}),n.settingsButton.addEventListener("click",()=>{B()}),n.backButton.addEventListener("click",()=>{v()}),n.saveApiKeyButton.addEventListener("click",h),n.apiKeyInput.addEventListener("input",O),n.addKeywordButton.addEventListener("click",()=>c()),n.saveKeywordsButton.addEventListener("click",C),S(),chrome.storage.onChanged.addListener(o=>{o[s.DETECTION_COUNT]&&m(o[s.DETECTION_COUNT].newValue)})}function c(e=""){let t=document.createElement("div");t.className="keyword-item",t.innerHTML=`
    <input type="text" class="keyword-input" placeholder="Enter keyword to block" value="${e}" />
    <span class="remove-keyword">\u2212</span>
  `,t.querySelector(".remove-keyword").addEventListener("click",()=>{t.remove()}),n.keywordsList.appendChild(t)}function K(){let e=n.keywordsList.querySelectorAll(".keyword-input");return Array.from(e).map(t=>t.value.trim()).filter(t=>t.length>0)}async function C(){let e=K();await d(s.BLOCKED_KEYWORDS,e),n.saveKeywordsButton.textContent="Saved!",setTimeout(()=>{n.saveKeywordsButton.textContent="Save Keywords"},2e3)}async function S(){let e=await a(s.BLOCKED_KEYWORDS,r[s.BLOCKED_KEYWORDS]);n.keywordsList.innerHTML="",e.length===0?c():e.forEach(t=>c(t)),k()}function k(){n.keywordsList.querySelectorAll(".remove-keyword").forEach(t=>{t.addEventListener("click",o=>{let i=o.target.closest(".keyword-item");i&&n.keywordsList.children.length>1&&i.remove()})})}document.addEventListener("DOMContentLoaded",f)});_();})();
