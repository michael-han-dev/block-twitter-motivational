"use strict";(()=>{var c=(t,n)=>()=>(t&&(n=t(t=0)),n);var l=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);async function a(t,n){try{return(await chrome.storage.sync.get({[t]:n}))[t]}catch{return n}}async function i(t,n){try{await chrome.storage.sync.set({[t]:n})}catch{}}var o,r,u=c(()=>{"use strict";o={SLOP_BLOCK_ENABLED:"slopBlockEnabled",DETECTION_COUNT:"detectionCount",USER_WHITELIST:"userWhitelist",BLUR_MODE:"blurMode",OPENROUTER_API_KEY:"openRouterApiKey",CUSTOM_PROMPT:"customPrompt"},r={[o.SLOP_BLOCK_ENABLED]:!1,[o.DETECTION_COUNT]:0,[o.USER_WHITELIST]:[],[o.BLUR_MODE]:!0,[o.OPENROUTER_API_KEY]:"",[o.CUSTOM_PROMPT]:""}});var L=l(()=>{u();var e;function m(){return{statusText:document.getElementById("statusText"),toggleButton:document.getElementById("toggleButton"),settingsButton:document.getElementById("settingsButton"),mainView:document.getElementById("mainView"),settingsView:document.getElementById("settingsView"),backButton:document.getElementById("backButton"),apiKeyInput:document.getElementById("apiKeyInput"),saveApiKeyButton:document.getElementById("saveApiKeyButton"),customPromptInput:document.getElementById("customPromptInput"),savePromptButton:document.getElementById("savePromptButton")}}async function E(t){e.toggleButton.classList.toggle("enabled",t),e.statusText.textContent=t?"Enabled":"Disabled";try{await i(o.SLOP_BLOCK_ENABLED,t),chrome.tabs.query({active:!0,currentWindow:!0},n=>{var s;(s=n[0])!=null&&s.id&&chrome.tabs.sendMessage(n[0].id,{action:"stateChanged",enabled:t}).catch(()=>{})})}catch{}}function d(){e.mainView.style.display="block",e.settingsView.style.display="none"}function g(){e.mainView.style.display="none",e.settingsView.style.display="block"}async function p(){let t=e.apiKeyInput.value.trim();t&&(await i(o.OPENROUTER_API_KEY,t),e.saveApiKeyButton.textContent="Saved!",setTimeout(()=>{e.saveApiKeyButton.textContent="Save"},2e3))}async function y(){let t=e.customPromptInput.value.trim();t&&(await i(o.CUSTOM_PROMPT,t),e.savePromptButton.textContent="Saved!",setTimeout(()=>{e.savePromptButton.textContent="Save"},2e3))}async function T(){let t=await a(o.OPENROUTER_API_KEY,""),n=await a(o.CUSTOM_PROMPT,"");e.apiKeyInput.value=t,e.customPromptInput.value=n}async function B(){e=m();let t=await a(o.SLOP_BLOCK_ENABLED,r[o.SLOP_BLOCK_ENABLED]);await T(),e.toggleButton.classList.toggle("enabled",t),e.statusText.textContent=t?"Enabled":"Disabled",e.toggleButton.addEventListener("click",async()=>{let s=!e.toggleButton.classList.contains("enabled");await E(s)}),e.settingsButton.addEventListener("click",()=>{g()}),e.backButton.addEventListener("click",()=>{d()}),e.saveApiKeyButton.addEventListener("click",p),e.savePromptButton.addEventListener("click",y)}document.addEventListener("DOMContentLoaded",B)});L();})();
