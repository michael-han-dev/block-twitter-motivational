"use strict";(()=>{var m=(e,n)=>()=>(e&&(n=e(e=0)),n);var E=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);async function i(e,n){try{return(await chrome.storage.sync.get({[e]:n}))[e]}catch(s){return console.error(`Failed to get storage value for key ${e}:`,s),n}}async function c(e,n){try{await chrome.storage.sync.set({[e]:n})}catch(s){console.error(`Failed to set storage value for key ${e}:`,s)}}var o,r,g=m(()=>{"use strict";o={SLOP_BLOCK_ENABLED:"slopBlockEnabled",DETECTION_COUNT:"detectionCount",USER_WHITELIST:"userWhitelist",BLUR_MODE:"blurMode",GROQ_API_KEY:"groqApiKey",AI_DETECTION_ENABLED:"aiDetectionEnabled",SYSTEM_PROMPT:"systemPrompt",BATCH_SIZE:"batchSize",PROCESSED_TWEET_IDS:"processedTweetIds",LLM_ANALYZED_IDS:"llmAnalyzedIds",COLLAPSED_TWEET_IDS:"collapsedTweetIds"},r={[o.SLOP_BLOCK_ENABLED]:!1,[o.DETECTION_COUNT]:0,[o.USER_WHITELIST]:[],[o.BLUR_MODE]:!0,[o.GROQ_API_KEY]:"",[o.AI_DETECTION_ENABLED]:!1,[o.SYSTEM_PROMPT]:`You are an expert at detecting AI-generated motivational slop, engagement bait, and generic inspirational content on social media. Analyze each tweet and classify it as slop or genuine content. SLOP INDICATORS: motivational clich\xE9s such as \u201Cmindset is everything,\u201D \u201Cfollow your dreams,\u201D or \u201Chustle harder\u201D; money or business schemes promising \u201C$10k/month,\u201D \u201Cpassive income,\u201D or \u201Cfinancial freedom\u201D; generic advice patterns like \u201Chere\u2019s what I learned,\u201D \u201CX things nobody tells you,\u201D or \u201Cstop doing this, start doing this\u201D; engagement bait phrases such as \u201Cunpopular opinion,\u201D \u201Clet that sink in,\u201D or \u201Cthread \u{1F9F5}\u201D; AI-like structures including numbered or bullet lists, formulaic advice, or excessive emojis; buzzwords like entrepreneur, transformation, breakthrough, optimize, or unlock potential; direct sales pitches such as \u201CDM me,\u201D \u201Clink in bio,\u201D \u201Climited time,\u201D or \u201Cexclusive access.\u201D Additional red flags: any presence of the Unicode em dash (U+2014) instantly marks the tweet as slop with confidence 1.0; dramatic one-line paragraphs split for emphasis; repetitive rhetorical questions; exaggerated claims about politics, business deals, or overnight success; imperative mini-sentences (\u201CGo gym.\u201D, \u201CKeep shipping.\u201D). If two or more indicators appear, classify as slop with high confidence; otherwise judge contextually. 

Important! You must return JSON format: {"results": [{"id": 0, "isSlop": true/false, "confidence": 0.0-1.0}]} where id matches tweet position (0-10).`,[o.BATCH_SIZE]:10,[o.PROCESSED_TWEET_IDS]:[],[o.LLM_ANALYZED_IDS]:[],[o.COLLAPSED_TWEET_IDS]:[]}});var _=E(()=>{g();var t,l="";function p(){return{statusText:document.getElementById("statusText"),toggleButton:document.getElementById("toggleSwitch"),settingsButton:document.getElementById("settingsButton"),mainView:document.getElementById("mainView"),settingsView:document.getElementById("settingsView"),backButton:document.getElementById("backButton"),apiKeyInput:document.getElementById("apiKeyInput"),saveApiKeyButton:document.getElementById("submitApiKey"),llmCountBadge:document.getElementById("llmCountBadge")}}function u(e){if(!e)return"";let n=e.slice(0,6),s="*".repeat(Math.max(0,e.length-n.length));return n+s}async function T(e){let n=t.toggleButton;if(n.checked=e,t.statusText.textContent=e?"Enabled":"Disabled",e){let s=await i(o.DETECTION_COUNT,r[o.DETECTION_COUNT]);d(s)}else t.llmCountBadge.style.display="none";try{await c(o.SLOP_BLOCK_ENABLED,e),chrome.runtime.sendMessage({action:"stateChanged",enabled:e}).catch(()=>{}),chrome.tabs.query({active:!0,currentWindow:!0},s=>{var a;(a=s[0])!=null&&a.id&&chrome.tabs.sendMessage(s[0].id,{action:"stateChanged",enabled:e}).catch(()=>{})})}catch(s){console.error("Error updating toggle state:",s)}}function y(){t.mainView.style.display="flex",t.settingsView.style.display="none",t.mainView.style.removeProperty("width")}function h(){t.mainView.style.display="none",t.settingsView.style.display="block",t.settingsView.style.removeProperty("width")}async function I(){let e=t.apiKeyInput.value.trim();e&&(await c(o.GROQ_API_KEY,e),l=e,t.apiKeyInput.value=u(e),t.saveApiKeyButton.textContent="Saved!",setTimeout(()=>{t.saveApiKeyButton.textContent="Submit API Key"},2e3))}async function L(){let e=await i(o.GROQ_API_KEY,"");l=e,t.apiKeyInput.value=u(e);let n=await i(o.DETECTION_COUNT,r[o.DETECTION_COUNT]);d(n)}function d(e){let n=t.toggleButton.checked;e>0?(t.llmCountBadge.textContent=String(e),t.llmCountBadge.style.display="inline-block"):n?(t.llmCountBadge.textContent="ON",t.llmCountBadge.style.display="inline-block"):t.llmCountBadge.style.display="none"}function B(){let e=t.apiKeyInput.value.trim(),n=e===u(l)||e===l;t.saveApiKeyButton.toggleAttribute("disabled",n)}async function v(){t=p();let e=await i(o.SLOP_BLOCK_ENABLED,r[o.SLOP_BLOCK_ENABLED]);await L();let n=t.toggleButton;n.checked=e,t.statusText.textContent=e?"Enabled":"Disabled",t.toggleButton.addEventListener("change",async()=>{let a=t.toggleButton.checked;await T(a)}),t.settingsButton.addEventListener("click",()=>{h()}),t.backButton.addEventListener("click",()=>{y()}),t.saveApiKeyButton.addEventListener("click",I),t.apiKeyInput.addEventListener("input",B),chrome.storage.onChanged.addListener(s=>{s[o.DETECTION_COUNT]&&d(s[o.DETECTION_COUNT].newValue)})}document.addEventListener("DOMContentLoaded",v)});_();})();
