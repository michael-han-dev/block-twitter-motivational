"use strict";(()=>{var m=(e,t)=>()=>(e&&(t=e(e=0)),t);var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);async function c(e,t){try{return(await chrome.storage.sync.get({[e]:t}))[e]}catch(a){return console.error(`Failed to get storage value for key ${e}:`,a),t}}async function s(e,t){try{await chrome.storage.sync.set({[e]:t})}catch(a){console.error(`Failed to set storage value for key ${e}:`,a)}}var o,n,u=m(()=>{"use strict";o={SLOP_BLOCK_ENABLED:"slopBlockEnabled",DETECTION_COUNT:"detectionCount",USER_WHITELIST:"userWhitelist",BLUR_MODE:"blurMode",GROQ_API_KEY:"groqApiKey",AI_DETECTION_ENABLED:"aiDetectionEnabled",SYSTEM_PROMPT:"systemPrompt",BATCH_SIZE:"batchSize",PROCESSED_TWEET_IDS:"processedTweetIds",LLM_ANALYZED_IDS:"llmAnalyzedIds",COLLAPSED_TWEET_IDS:"collapsedTweetIds"},n={[o.SLOP_BLOCK_ENABLED]:!1,[o.DETECTION_COUNT]:0,[o.USER_WHITELIST]:[],[o.BLUR_MODE]:!0,[o.GROQ_API_KEY]:"",[o.AI_DETECTION_ENABLED]:!1,[o.SYSTEM_PROMPT]:`You are an expert at detecting AI-generated motivational slop, engagement bait, and generic inspirational content on social media. Analyze each tweet and classify it as slop or genuine content. SLOP INDICATORS: motivational clich\xE9s such as \u201Cmindset is everything,\u201D \u201Cfollow your dreams,\u201D or \u201Chustle harder\u201D; money or business schemes promising \u201C$10k/month,\u201D \u201Cpassive income,\u201D or \u201Cfinancial freedom\u201D; generic advice patterns like \u201Chere\u2019s what I learned,\u201D \u201CX things nobody tells you,\u201D or \u201Cstop doing this, start doing this\u201D; engagement bait phrases such as \u201Cunpopular opinion,\u201D \u201Clet that sink in,\u201D or \u201Cthread \u{1F9F5}\u201D; AI-like structures including numbered or bullet lists, formulaic advice, or excessive emojis; buzzwords like entrepreneur, transformation, breakthrough, optimize, or unlock potential; direct sales pitches such as \u201CDM me,\u201D \u201Clink in bio,\u201D \u201Climited time,\u201D or \u201Cexclusive access.\u201D Additional red flags: any presence of the Unicode em dash (U+2014) instantly marks the tweet as slop with confidence 1.0; dramatic one-line paragraphs split for emphasis; repetitive rhetorical questions; exaggerated claims about politics, business deals, or overnight success; imperative mini-sentences (\u201CGo gym.\u201D, \u201CKeep shipping.\u201D). If two or more indicators appear, classify as slop with high confidence; otherwise judge contextually. 

Return JSON format: {"results": [{"id": 0, "isSlop": true/false, "confidence": 0.0-1.0}]} where id matches tweet position (0-10).`,[o.BATCH_SIZE]:10,[o.PROCESSED_TWEET_IDS]:[],[o.LLM_ANALYZED_IDS]:[],[o.COLLAPSED_TWEET_IDS]:[]}});var p=T(()=>{u();chrome.runtime.onInstalled.addListener(async e=>{e.reason==="install"&&(await s(o.SLOP_BLOCK_ENABLED,n[o.SLOP_BLOCK_ENABLED]),await s(o.BLUR_MODE,n[o.BLUR_MODE]),await s(o.DETECTION_COUNT,n[o.DETECTION_COUNT]),await s(o.USER_WHITELIST,n[o.USER_WHITELIST]));let t=await c(o.SLOP_BLOCK_ENABLED,n[o.SLOP_BLOCK_ENABLED]);await E(t)});chrome.runtime.onMessage.addListener(async(e,t,a)=>{var r;try{switch(e.action){case"stateChanged":await E(e.enabled),a({success:!0});break;case"updateCount":let d=await c(o.DETECTION_COUNT,n[o.DETECTION_COUNT])+(e.count||1);await s(o.DETECTION_COUNT,d),(r=t.tab)!=null&&r.id&&await l(!0,t.tab.id,d),a({success:!0});break;default:a({error:"Unknown action"})}}catch(i){a({error:i instanceof Error?i.message:"Unknown error"})}return!0});async function E(e){try{let t=e?"Slop Block: ON (click to disable)":"Slop Block: OFF (click to enable)";await chrome.action.setTitle({title:t});let r=(await chrome.tabs.query({})).filter(i=>g(i.url));for(let i of r)i.id&&await l(e,i.id)}catch(t){console.error("Failed to update icon:",t)}}async function l(e,t,a){try{if(!e){await chrome.action.setBadgeText({text:"",tabId:t});return}if(a!==void 0&&a>0){let r=a>99?"99+":a.toString();await chrome.action.setBadgeText({text:r,tabId:t}),await chrome.action.setBadgeBackgroundColor({color:"#ff4444",tabId:t})}else await chrome.action.setBadgeText({text:"ON",tabId:t}),await chrome.action.setBadgeBackgroundColor({color:"#00aa00",tabId:t})}catch(r){console.error("Failed to update badge:",r)}}function g(e){return e?e.includes("twitter.com")||e.includes("x.com"):!1}chrome.tabs.onUpdated.addListener(async(e,t,a)=>{if(t.status==="complete"&&g(a.url)){let r=await c(o.SLOP_BLOCK_ENABLED,n[o.SLOP_BLOCK_ENABLED]);await l(r,e)}})});p();})();
