"use strict";(()=>{var m=(e,t)=>()=>(e&&(t=e(e=0)),t);var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);async function c(e,t){try{return(await chrome.storage.sync.get({[e]:t}))[e]}catch(r){return console.error(`Failed to get storage value for key ${e}:`,r),t}}async function s(e,t){try{await chrome.storage.sync.set({[e]:t})}catch(r){console.error(`Failed to set storage value for key ${e}:`,r)}}var o,n,u=m(()=>{"use strict";o={SLOP_BLOCK_ENABLED:"slopBlockEnabled",DETECTION_COUNT:"detectionCount",BLUR_MODE:"blurMode",GROQ_API_KEY:"groqApiKey",SYSTEM_PROMPT:"systemPrompt",PROCESSED_TWEET_IDS:"processedTweetIds",COLLAPSED_TWEET_IDS:"collapsedTweetIds",BLOCKED_KEYWORDS:"blockedKeywords"},n={[o.SLOP_BLOCK_ENABLED]:!1,[o.DETECTION_COUNT]:0,[o.BLUR_MODE]:!0,[o.GROQ_API_KEY]:"",[o.SYSTEM_PROMPT]:`BE EXTREMELY CONCISE WITH YOUR THOUGHTS, NO NEED TO ELABORATE. You are an expert at detecting AI-generated tweets slop, engagement bait, and generic inspirational content on social media. Analyze each tweet and classify it as slop or genuine content. SLOP INDICATORS: motivational clich\xE9s such as \u201Cmindset is everything,\u201D \u201Cfollow your dreams,\u201D or \u201Chustle harder\u201D; finishes with a call to action or promise of a link/course/email thread; generic advice patterns like \u201Chere\u2019s what I learned,\u201D \u201CX things nobody tells you,\u201D or \u201Cstop doing this, start doing this\u201D; engagement bait phrases such as \u201Cunpopular opinion,\u201D \u201Clet that sink in,\u201D or \u201Cthread \u{1F9F5}\u201D; AI-like structures including numbered or bulleted list of advice, claims, or one-sentence paragraphs, formulaic advice, or excessive emojis; buzzwords like entrepreneur, transformation, breakthrough, optimize, or unlock potential; direct sales pitches such as \u201CDM me,\u201D \u201Clink in bio,\u201D \u201Climited time,\u201D or \u201Cexclusive access.\u201D Additional red flags: any presence of the Unicode em dash (U+2014) instantly marks the tweet as slop with confidence 1.0; dramatic one-line paragraphs split for emphasis; repetitive rhetorical questions; imperative mini-sentences (\u201CGo gym.\u201D, \u201CKeep shipping.\u201D). If two or more indicators appear, classify as slop with high confidence; otherwise judge contextually. 

Important! You must return JSON format: {"results": [{"id": 0, "isSlop": true/false, "confidence": 0.0-1.0}]} where id matches tweet position (0-10).`,[o.PROCESSED_TWEET_IDS]:[],[o.COLLAPSED_TWEET_IDS]:[],[o.BLOCKED_KEYWORDS]:[]}});var h=T(()=>{u();chrome.runtime.onInstalled.addListener(async e=>{e.reason==="install"&&(await s(o.SLOP_BLOCK_ENABLED,n[o.SLOP_BLOCK_ENABLED]),await s(o.BLUR_MODE,n[o.BLUR_MODE]),await s(o.DETECTION_COUNT,n[o.DETECTION_COUNT]));let t=await c(o.SLOP_BLOCK_ENABLED,n[o.SLOP_BLOCK_ENABLED]);await E(t)});chrome.runtime.onMessage.addListener(async(e,t,r)=>{var a;try{switch(e.action){case"stateChanged":await E(e.enabled),r({success:!0});break;case"updateCount":let d=await c(o.DETECTION_COUNT,n[o.DETECTION_COUNT])+(e.count||1);await s(o.DETECTION_COUNT,d),(a=t.tab)!=null&&a.id&&await l(!0,t.tab.id,d),r({success:!0});break;default:r({error:"Unknown action"})}}catch(i){r({error:i instanceof Error?i.message:"Unknown error"})}return!0});async function E(e){try{let t=e?"Slop Block: ON (click to disable)":"Slop Block: OFF (click to enable)";await chrome.action.setTitle({title:t});let a=(await chrome.tabs.query({})).filter(i=>g(i.url));for(let i of a)i.id&&await l(e,i.id)}catch(t){console.error("Failed to update icon:",t)}}async function l(e,t,r){try{if(!e){await chrome.action.setBadgeText({text:"",tabId:t});return}if(r!==void 0&&r>0){let a=r>99?"99+":r.toString();await chrome.action.setBadgeText({text:a,tabId:t}),await chrome.action.setBadgeBackgroundColor({color:"#ff4444",tabId:t})}else await chrome.action.setBadgeText({text:"ON",tabId:t}),await chrome.action.setBadgeBackgroundColor({color:"#00aa00",tabId:t})}catch(a){console.error("Failed to update badge:",a)}}function g(e){return e?e.includes("twitter.com")||e.includes("x.com"):!1}chrome.tabs.onUpdated.addListener(async(e,t,r)=>{if(t.status==="complete"&&g(r.url)){let a=await c(o.SLOP_BLOCK_ENABLED,n[o.SLOP_BLOCK_ENABLED]);await l(a,e)}})});h();})();
